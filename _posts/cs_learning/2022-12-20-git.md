---
layout: post
title: "git学习笔记（未完）"
subtitle: "Learning to use git"
date: 2022-12-20
author: "Kenshin"
header-img: "img/post-bg/post-bg-default.png"
tags:
  - LearnCS
---

### 基本

git add <文件名/目录名> //提交到索引

git commit -m '<说明>' //将索引区域内容提交到本地仓库

git status //查看当前 git 状态，有无新的变更

git log //查看提交记录

//指定--graph 以文本形式显示更新记录的流程图，指定--oneline 在一行中显示提交的信息

//使用 git config --global alias.lg "log --graph --oneline" 添加别名 lg 方便使用

//使用 git config --global core.quotepath off 显示中文字符

### 推送

git remote add <name> <repository> //添加远程数据库并起别名，建议为 origin（默认）

git push <repository> <refspec> //指定推送目标地址和推送的分支，不存在的分支会直接创建

git push -u <repository> <refspec> //使用-u 选项则下一次推送就可以省略分支名称

### 克隆

git clone <repository> <directory>

git push //克隆的仓库推送时可以省略名称

### 拉取

git pull <repository> <refspec> //仓库省略则拉取到 origin，分支省略则拉取到 master

//pull 后解决冲突后才能再 push

git fetch//查看远程更新历史记录，存放到 FETCH_HEAD

### 分支

//Merge 分支和 Topic 分支，如以 master 作为 merge 分支，创建 topic 分支以进行修改，测试 bug 等

git branch //查看分支状态，-a 看远程（要先 fetch）

git branch <branchname> //创建分支

//HEAD 指向现在使用中的分支的最后一次更新

git checkout <branch> //切换分支

git checkout -b <branch> <commitID/branch>//创建并切换分支，可选的创建基于选项，可以是 remote branch（要先 fetch）

git branch -d <branch> //删除分支，必须先离开；分支之间历史记录不一致需要先合并（使用-D 强制删除）

//切换分支不会丢失未提交的索引区域或工作树的内容

### stash

​ git stash //暂存修改内容，以消除切换分支的冲突

​ git stash pop //还原

​ git checkout <directory> //对改动的文件或目录放弃所有更改

### 合并分支

/\*

merge：master 无修改则直接合并，称为 fast-forward；否则需要修改冲突，然后合并生成一个新的提交

rebase：将合并分支的记录添加到被合并分支的后面，需要修改冲突。rebase 后需要将被合并分支的 HEAD 移到最新的位置。与 merge 相比，主要作用是简化提交历史记录，具体的：向 topic 分支中更新 merge 分支，使用 rebase；向 merge 分支导入 topic 分支，先使用 rebase 再使用 merge

\*/

git merge <commit> //将指定分支导入到 HEAD 分支，因此修改前需要用 checkout 切换

git diff <filename> //查看冲突内容

git diff --check

git rebase <branch>

//出现冲突进行修改后，使用 add，再使用 rebase --continue 继续。否则使用--skip 跳过这次提交，或--abort 撤销 rebase 操作

//最后会进入 VIM，可以添加合并说明

git rebase -i HEAD~~ //将 HEAD 和 HEAD 前两个提交之间的提交进行修改，squash 汇合，edit 修改....

git merge --squash <branch> //将 branch 分支所有提交合并生成新的提交到当前所在分支

### 标签

//标签是固定的，向 HEAD 添加，分为轻标签和注解标签

git tag <tagname> //轻标签

git tag -a <tagname> //注解标签，会进入 VIM 写注解

git tag -am "<注解>" <tagname>

git tag -n //显示标签的列表和注解

git tag -d <tagname> //删除标签

//git checkout -b <branchname> <tagname> //以标签为基础创建并切换新分支，因为 tag 指向的就是一个 commit

### 修改

git commit --amend -m "新的描述" //主要用于对最近一次提交（HEAD 所在）添加漏掉的档案或修改注解

git revert <commitID/HEAD> //相较于 reset，可以安全的取消过去发布的提交，不会减少历史记录

git reset //--soft：只移动 HEAD 位置，只取消提交；--mixed：还修改索引，用于复原修改过的索引的状态；--hard：还修改工作树，彻底取消最近的提交

git reset --hard HEAD~ //将 HEAD 回退一个操作，~~即两个

git reset --hard ORIG_HEAD //撤销

### SSL

ssh-keygen //创建公钥私钥

.....
